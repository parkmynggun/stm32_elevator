# STM32 엘리베이터 제어 시스템

## 프로젝트 개요
STM32 마이크로컨트롤러를 기반으로 한 엘리베이터 제어 시스템입니다. 스텝모터를 이용한 엘리베이터 이동 제어(1층~3층), 서보모터를 이용한 문 열림/닫힘 제어, 각층에 포토인터럽터를 설치하여 현재 위치 감지, FND를 통해 현재 층 표시, LCD로 동작 상태 출력 등의 기능을 포함합니다.

## 구현 목표
- **STM32 기반 엘리베이터 제어 시스템 구현**
- **스텝모터를 이용한 엘리베이터 이동 제어 (1층 ~ 3층)**
- **서보모터를 이용한 문 열림/닫힘 제어**
- **각 층에 포토인터럽터를 설치하여 현재 위치 감지**
- **FND를 통해 현재 층 표시, LCD로 동작 상태 출력**
- **사용자 버튼 입력으로 목적층 선택 및 동작 수행**

## 구현 방법

### 문 제어
- 버튼 입력 시 서보모터를 제어해 문 열림/닫힘 구현

### 층수 이동
- 층수 버튼 누름 → target_floor에 값 저장
- current_floor와 비교하여 이동 방향 결정
- 스텝모터 회전으로 엘리베이터 이동

### 현재 위치 감지
- 각 층의 포토인터럽터를 통해 current_floor 실시간 감지
- 감지된 값은 LCD, FND에 표시됨

### 도착 처리
- 도착 시 문 자동 열림
- LCD 및 FND에 도착층 정보 출력

## 사용 부품

| 번호 | 부품명 | 모델명 |
|------|--------|--------|
| 1 | STM32F411RET6 | - |
| 2 | 스텝모터 | 28BYJ-48 - 5V |
| 3 | 스텝모터 드라이버 | ULN2003AN |
| 4 | 스위치 | TACT |
| 5 | FND-1 | 세그먼트 |
| 6 | LCD | LCD1602 |
| 7 | I2C BUS | PCF8574 |
| 8 | 포토인터럽터 | SG-23FF |

## 시스템 구성도
프로젝트는 다음과 같은 주요 구성요소로 이루어집니다:
- STM32F411RET6 마이크로컨트롤러 (메인 제어부)
- ULN2003AN 스텝모터 드라이버
- 28BYJ-48 스텝모터 (엘리베이터 이동)
- 서보모터 (문 제어)
- LCD1602 디스플레이 (상태 표시)
- 7-세그먼트 FND (층수 표시)
- 포토인터럽터 센서 (위치 감지)
- 택트 스위치 (사용자 입력)

## 주요 기능

### 1. 층간 이동 제어
- 1층부터 3층까지 이동 가능
- 스텝모터를 이용한 정밀한 위치 제어
- 포토인터럽터를 통한 실시간 위치 피드백

### 2. 문 제어 시스템
- 서보모터를 이용한 자동 문 열림/닫힘
- 도착층에서 자동으로 문 열림
- 사용자 버튼을 통한 수동 문 제어

### 3. 사용자 인터페이스
- LCD를 통한 현재 상태 및 동작 정보 표시
- FND를 통한 현재 층수 표시
- 직관적인 버튼 인터페이스

### 4. 안전 기능
- 포토인터럽터를 통한 정확한 위치 감지
- 각 층별 정밀한 정지 제어

## 개발 환경
- **마이크로컨트롤러**: STM32F411RET6
- **개발 도구**: STM32CubeIDE
- **프로그래밍 언어**: C
- **통신 프로토콜**: I2C (LCD 제어용)

## 팀원 역할

| 팀원 | 담당 업무 | 프로젝트 파트 |
|------|-----------|---------------|
| 박성준(교육생) | FND/층에 맞는 숫자 표시 인터페이스 코드 작성<br>기구 제작 | R&R,<br>프로젝트 개요 |
| 민형기(교육생) | LCD/층에 맞는 화면출력 코드 작성<br>기구 제작 | 구현목표, 방법및 예상사용부품 |
| 박명진(팀장) | 모터 출력 코드 서보모터 출력코드 및 컨트롤코드 작성<br>LCD 화면출력 코드 작성 지원<br>PPT 작성<br>기구 제작 | 문제점및해결방안<br>결과및 고찰<br>시연 영상및 사용코드 QR |
| 김도현(교육생) | BUTTON 디바운싱, BUTTON관련 코드작성<br>기구 제작 | 기능설명<br>시스템및 주요기능 |
| 이민우(교육생) | 포토센서를 이용한 인터럽트 코드 작성<br>기구 제작 | 타임차트 및 저항 요구 사항<br>핀구성 및 하드웨어 인터페이스 |

## 프로젝트 특징
- 실제 엘리베이터의 동작 원리를 모방한 교육용 프로젝트
- 임베디드 시스템의 다양한 요소 기술 통합

## 향후 개선 방안
- 더 많은 층수 지원
- 비상 정지 기능 추가

---
**개발 기간**: 06/18 ~ 06/25
**프로젝트 성격**: STM32 기반 임베디드 시스템 교육 프로젝트
